@page "/CustomerDetails/{id:int}"
@inject Microsoft.Extensions.Localization.IStringLocalizer<Resource.Customers.CustomerDetails> Loc
@inject Microsoft.Extensions.Localization.IStringLocalizer<PointOfSale.DAL.Resources.Resources> Loc2
<div class="card card-custom">
    <div class="card-header">
        @*<div class="card-title">
                <h3 class="card-label">@customer.Name</h3>
            </div>*@
        <div class="card-toolbar">
            <ul class="nav nav-bold nav-pills">
                <li class="nav-item">
                    <a class="nav-link active" data-toggle="tab" href="#kt_tab_pane_7_1">@Loc["CustomerDetail"]</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#kt_tab_pane_7_2">@Loc["CustomerContacts"]</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-toggle="tab" href="#kt_tab_pane_7_3">@Loc["CustomerSales"]</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="card-body">
        <div class="tab-content">
            <div class="tab-pane fade show active" id="kt_tab_pane_7_1" role="tabpanel" aria-labelledby="kt_tab_pane_7_1">
                <div class="flex-row-fluid ml-lg-8">
                    <!--begin::Card-->
                    <div class="card card-custom card-stretch">
                        <!--begin::Header-->
                        <div class="card-header py-3">
                            <div class="card-title align-items-start flex-column">
                                <h3 class="card-label font-weight-bolder text-dark">@Loc["Information"] @customer.Name </h3>
                            </div>
                        </div>
                        <!--end::Header-->
                        <!--begin::Form-->
                        <!--begin::Body-->
                        <div class="card-body" style="text-align: right;">
                            <div class="row">
                                <h5 class="font-weight-bold mb-6">@Loc["CustomerInfo"]</h5>
                            </div>
                            <div class="form-group row">
                                <label class="col-xl-3 col-lg-3 col-form-label text-right">@Loc2["CustomerImage"]</label>
                                <div class="col-lg-9 col-xl-6">
                                    @if (customer.CustomerImage == "" || customer.CustomerImage == null)
                                    {
                                        <img src="assets/media/users/300_21.jpg" style="width:200px" />
                                    }
                                    else
                                    { <img src="@customer.CustomerImage" style="width:200px" />}

                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-xl-6">
                                    <RadzenLabel Text="@Loc2["Name"]" Component="Name" style="width: 100%">
                                    </RadzenLabel>
                                    @*<DisplayName For="@(() => customer.Name)"></DisplayName>*@
                                    <div class="col-xl-8">
                                        <label class="form-control">@customer.Name</label>
                                        @*<InputText id="Name" @bind-Value="customer.Name" class="form-control" />*@
                                    </div>
                                </div>

                            </div>
                            <div class="form-group row">
                                <div class="col-xl-6">
                                    <RadzenLabel Text="@Loc2["AddressType"]" Component="AddressType" style="width: 100%">
                                    </RadzenLabel>
                                    @*<DisplayName For="@(() => customer.AddressTypeId)"></DisplayName>*@
                                    <div class="col-xl-8">
                                        <label class="form-control">@addressType.Type</label>
                                        @*<RadzenDropDown AllowClear="true" TValue="int" Name="AddressTypeId"
                            FilterCaseSensitivity="Radzen.FilterCaseSensitivity.CaseInsensitive"
                            AllowFiltering="true" Placeholder="Select..."
                            Data="@addressTypes" TextProperty="Type" @bind-Value="@customer.AddressTypeId"
                            ValueProperty="Id"  class="form-control" Style="margin-bottom: 20px">
            </RadzenDropDown>*@

                                    </div>
                                </div>
                                <div class="col-xl-6">
                                    <RadzenLabel Text="@Loc2["Phone"]" Component="Phone" style="width: 100%">
                                    </RadzenLabel>
                                    @*<DisplayName For="@(() => customer.Phone)"></DisplayName>*@
                                    <div class="col-xl-8">
                                        <label class="form-control">@customer.Phone</label>

                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-xl-6">
                                    <RadzenLabel Text="@Loc2["Mobile"]" Component="Mobile" style="width: 100%">
                                    </RadzenLabel>
                                    @*<DisplayName For="@(() => customer.Mobile)"></DisplayName>*@
                                    <div class="col-xl-8">
                                        <label class="form-control">@customer.Mobile</label>

                                    </div>
                                </div>
                                <div class="col-xl-6">
                                    <RadzenLabel Text="@Loc2["EmailAddress"]" Component="Email" style="width: 100%">
                                    </RadzenLabel>
                                    <div class="col-xl-8">
                                        <label class="form-control">@customer.Email</label>

                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-xl-6">
                                    <RadzenLabel Text="@Loc2["CompanyAddressStreet1"]" Component="CompanyAddressStreet1" style="width: 100%">
                                    </RadzenLabel>
                                   @* <DisplayName For="@(() => customer.CompanyAddressStreet1)"></DisplayName>*@
                                    <div class="col-xl-8">
                                        <label class="form-control">@customer.CompanyAddressStreet1</label>
                                    </div>
                                </div>
                                <div class="col-xl-6">
                                    <RadzenLabel Text="@Loc2["CompanyAddressStreet2"]" Component="CompanyAddressStreet2" style="width: 100%">
                                    </RadzenLabel>
                                    <div class="col-xl-8">
                                        <label class="form-control">@customer.CompanyAddressStreet2</label>
                                    </div>
                                </div>

                            </div>

                            <div class="form-group row">
                                <div class="col-xl-6">
                                    <RadzenLabel Text="@Loc2["City"]" Component="City" style="width: 100%">
                                    </RadzenLabel>
                                    @*<DisplayName For="@(() => customer.City)"></DisplayName>*@
                                    <div class="col-xl-8">
                                        <label class="form-control">@customer.City</label>

                                    </div>
                                </div>
                                <div class="col-xl-6">
                                    <RadzenLabel Text="@Loc2["Country"]" Component="Country" style="width: 100%">
                                    </RadzenLabel>
                                    <div class="col-xl-8">
                                        <label class="form-control">@customer.Country</label>

                                    </div>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-xl-6">
                                    <RadzenLabel Text="@Loc2["TaxID"]" Component="TaxID" style="width: 100%">
                                    </RadzenLabel>
                                    <div class="col-xl-8">
                                        <label class="form-control">@customer.TaxID</label>

                                    </div>
                                </div>
                                <div class="col-xl-6">
                                    <RadzenLabel Text="@Loc2["JobPosition"]" Component="JobPosition" style="width: 100%">
                                    </RadzenLabel>
                                    <div class="col-xl-8">
                                        <label class="form-control">@customer.JobPosition</label>

                                    </div>
                                </div>
                            </div>

                            <div class="form-group row">
                                <div class="col-xl-6">
                                    <RadzenLabel Text="@Loc2["Website"]" Component="WebsiteLink" style="width: 100%">
                                    </RadzenLabel>
                                    @*<DisplayName For="@(() => customer.WebsiteLink)"></DisplayName>*@
                                    <div class="col-xl-8">
                                        <label class="form-control">@customer.WebsiteLink</label>

                                    </div>
                                </div>
                                <div class="col-xl-6">
                                    <RadzenLabel Text="@Loc2["Title"]" Component="Title" style="width: 100%">
                                    </RadzenLabel>
                                    @*<DisplayName For="@(() => customer.Title)"></DisplayName>*@
                                    <div class="col-xl-8">
                                        <label class="form-control">@customer.Title</label>

                                    </div>
                                </div>
                            </div>

                            <div class="form-group row">
                                <div class="col-xl-6">
                                    <RadzenLabel Text="@Loc2["Tags"]" Component="Tags" style="width: 100%">
                                    </RadzenLabel>
                                    @*<DisplayName For="@(() => customer.Tags)"></DisplayName>*@
                                    @*<label class="col-xl-4 col-lg-4 col-form-label">Tags</label>*@
                                    <div class="col-xl-8">
                                        <label class="form-control">@customer.Tags</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--end::Body-->
                        <!--end::Form-->
                    </div>
                </div>
            </div>
            <div class="tab-pane fade" id="kt_tab_pane_7_2" role="tabpanel" aria-labelledby="kt_tab_pane_7_2">
                <AddCustomerConacts id="@id"></AddCustomerConacts>
            </div>
            <div class="tab-pane fade" id="kt_tab_pane_7_3" role="tabpanel" aria-labelledby="kt_tab_pane_7_3">

            </div>
        </div>
    </div>
</div>
@code {
    [Parameter] public int id { get; set; }
    Customer customer = new Customer();
    AddressType addressType = new AddressType();
    protected override async Task OnInitializedAsync()
    {
        await JSRuntime.InvokeVoidAsync("StartLoading");
        customer = await Http.GetFromJsonAsync<Customer>("/api/Customers/GetById/" + id);
        addressType = await Http.GetFromJsonAsync<AddressType>("/api/AddressTypes/GetById/" + customer.AddressTypeId);
        await JSRuntime.InvokeVoidAsync("StopLoading");
    }
}
